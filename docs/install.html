<!doctype html><html lang=en><link href='data:image/gif;base64,R0lGODlhEAAQAPH/AAAAAP8AAP8AN////yH5BAUAAAQALAAAAAAQABAAAAM2SLrc/jA+QBUFM2iqA2bAMHSktwCCWJIYEIyvKLOuJt+wV69ry5cfwu7WCVp2RSPoUpE4n4sEADs=' rel=icon><title>KISS</title><meta charset=utf-8><meta name=Description content="An independent LinuxÂ® distribution with a focus on simplicity and the concept of less is more."><meta name=viewport content="width=device-width,initial-scale=1"><style>body{margin:0 0 4ch;overflow-y:scroll;font:16px monospace,monospace}img{max-width:80ch;display:block;height:auto}@media(prefers-color-scheme:dark){body{background:#000;color:#fff}a{color:#6CF}}.l{text-decoration:none;color:red}#w{max-width:100ch;margin:0 auto}#s{min-width:25ch;position:fixed;top:2ch;margin:0;overflow-y:auto;user-select:none}#m{margin: 2ch 0 0 24ch;}@media(max-width:130ch){body{font-size:1.941vw}#s{position:static}#s,#m{margin-left:1ch}}</style><div id=w><pre id=s>
<a href=/ class=l> _    _
| | _(_)___ ___
| |/ / / __/ __|
|   &lt;| \__ \__ \
|_|\_\_|___/___/</a>

<a href=/news>News</a>
<a href=/blog>Blog</a>

<a href=/wiki>Wiki (NEW!)</a>

<a href=/install>Install KISS</a>
<a href=/faq>FAQ</a>

<a href=/package-system>Package System</a>
<a href=/package-manager>Package Manager</a>

<a href=/guidestones>Guidestones</a>
<a href=/style>Style</a>

<a href=/projects>Software</a>

<a href=/testimonials>Testimonials</a>
<a href=/scrots>Screenshots</a>
<a href=/team>Team</a>

<a href=/contact>Contact</a>
<a href=/donate>Donate</a>

<a href=https://github.com/kisslinux/>GitHub -&gt;</a>

(C) Dylan Araps 2020

</pre><pre id=m>

<span id="[0]">[0]</span> INSTALL KISS
________________________________________________________________________________

Welcome to the installation guide for KISS Linux.

The installation is very similar to Gentoo's stage 3 tarballs. An archive is
used which contains a full KISS system minus the boot-loader and kernel.
The provided archive contains all of the tooling needed to rebuild itself as
well as the remaining packages needed for an installation.

You will need an existing Linux distribution to use as a base for the
installation. It does not matter what kind of distribution it is nor does it
matter what C library it uses.

For the purpose of this guide we will be using another Linux distribution's
live-CD to bootstrap KISS. The live-CD must include tar (with xz support),
and other basic utilities.

From this point on, the guide assumes you have booted a live-CD, are logged
in as root, have your disks/partitions/filesystems setup and have an internet
connection.

NOTE: If you come across any issues during the install process, refer to the
      FAQ page. If your issue is not covered by the FAQ, hop on the IRC channel
      and someone will assist you. See <a href="/contact">contact</a>  

NOTE: Don't blindly follow the steps here. Know what you're doing and put some
      thought into your actions. This guide will _guide_ you and not dictate
      to you.


<span id="[1]">[1]</span> THE PROCESS
________________________________________________________________________________

* Install Kiss                                                             <a href="#[2]">[2]</a>
    * Download The Latest Release                                          <a href="#[2.1]">[2.1]</a>
    * Verify The Checksums                                                 <a href="#[2.2]">[2.2]</a>
    * Verify The Signature                                                 <a href="#[2.3]">[2.3]</a>
    * Download The Chroot Helper                                           <a href="#[2.4]">[2.4]</a>
    * Unpack The Tarball                                                   <a href="#[2.5]">[2.5]</a>
    * Enter The Chroot                                                     <a href="#[2.6]">[2.6]</a>

* Enable Repository Signing                                                <a href="#[3]">[3]</a>
    * Build And Install Gnupg1                                             <a href="#[3.1]">[3.1]</a>
    * Import My Key                                                        <a href="#[3.2]">[3.2]</a>
    * Enable Signature Verification                                        <a href="#[3.3]">[3.3]</a>

* Rebuild Kiss                                                             <a href="#[4]">[4]</a>
    * Modify Compiler Options                                              <a href="#[4.1]">[4.1]</a>
    * Update All Base Packages                                             <a href="#[4.2]">[4.2]</a>
    * Rebuild All Packages                                                 <a href="#[4.3]">[4.3]</a>

* Userspace Tools                                                          <a href="#[5]">[5]</a>
    * Filesystems                                                          <a href="#[5.1]">[5.1]</a>
    * Device Management                                                    <a href="#[5.2]">[5.2]</a>
    * Wifi                                                                 <a href="#[5.3]">[5.3]</a>
    * Dynamic IP Addressing                                                <a href="#[5.4]">[5.4]</a>

* The Kernel                                                               <a href="#[6]">[6]</a>
    * Download The Kernel Sources                                          <a href="#[6.1]">[6.1]</a>
    * Download Firmware Blobs                                              <a href="#[6.2]">[6.2]</a>
    * Configure The Kernel                                                 <a href="#[6.3]">[6.3]</a>
    * Build The Kernel                                                     <a href="#[6.4]">[6.4]</a>
    * Install The Kernel                                                   <a href="#[6.5]">[6.5]</a>

* The Bootloader                                                           <a href="#[7]">[7]</a>
    * Build And Install Grub                                               <a href="#[7.1]">[7.1]</a>
    * Setup Grub                                                           <a href="#[7.2]">[7.2]</a>

* Install Init Scripts                                                     <a href="#[8]">[8]</a>
* Add A Normal User                                                        <a href="#[9]">[9]</a>
* Enable The Community Repository                                         <a href="#[10]">[10]</a>

* Install Xorg                                                            <a href="#[11]">[11]</a>
    * Add Your User To The Relevant Groups                                <a href="#[11.1]">[11.1]</a>

* Further Steps                                                           <a href="#[12]">[12]</a>


<span id="[2]">[2]</span> INSTALL KISS
________________________________________________________________________________

Your disks should be setup and fully mounted to /mnt.


    <span id="[2.1]">[2.1]</span> DOWNLOAD THE LATEST RELEASE
    ____________________________________________________________________________

    $ url=<a href='https://github.com/kisslinux/repo/releases/download/1.10.0'>https://github.com/kisslinux/repo/releases/download/1.10.0</a>
    $ wget "$url/kiss-chroot.tar.xz"


    <span id="[2.2]">[2.2]</span> VERIFY THE CHECKSUMS (recommended)
    ____________________________________________________________________________

    This step verifies that the release matches the checksums generated upon
    its creation and also ensures that the download completed successfully.

    $ wget "$url/kiss-chroot.tar.xz.sha256"
    $ sha256sum -c < kiss-chroot.tar.xz.sha256


    <span id="[2.3]">[2.3]</span> VERIFY THE SIGNATURE (recommended)
    ____________________________________________________________________________

    This step verifies that the release was signed by Dylan Araps. If the live
    OS of your choice does not include GPG, this step can also be done on
    another machine (with the same tarball).

    $ wget "$url/kiss-chroot.tar.xz.asc"

    # Import my public key (if this fails, try another keyserver).
    $ gpg --keyserver keys.gnupg.net --recv-key 46D62DD9F1DE636E

    # Verify the signature.
    $ gpg --verify kiss-chroot.tar.xz.asc kiss-chroot.tar.xz


    <span id="[2.4]">[2.4]</span> DOWNLOAD THE CHROOT HELPER
    ____________________________________________________________________________

    This is a simple script to chroot into /mnt and set up the environment for
    the rest of the installation.

    $ url=<a href='https://raw.githubusercontent.com/kisslinux/kiss/master/contrib'>https://raw.githubusercontent.com/kisslinux/kiss/master/contrib</a>
    $ wget "$url/kiss-chroot"

    # Inspect the script before you execute it below.
    $ vi kiss-chroot

    # Ensure the script is executable.
    $ chmod +x kiss-chroot


    <span id="[2.5]">[2.5]</span> UNPACK THE TARBALL
    ____________________________________________________________________________

    This step effectively installs KISS to /mnt. The tarball contains a full
    system minus the bootloader, kernel and optional utilities.

    $ tar xvf kiss-chroot.tar.xz -C /mnt --strip-components 1


    <span id="[2.6]">[2.6]</span> ENTER THE CHROOT
    ____________________________________________________________________________

    On execution of this step you will be running KISS! The next steps involve
    the kernel, software compilation and system setup.

    $ ./kiss-chroot /mnt


<span id="[3]">[3]</span> ENABLE REPOSITORY SIGNING
________________________________________________________________________________

This step is _entirely optional_ and can also be done after the installation.

Repository signing ensures that all updates have been signed by (Dylan Araps)
and further prevents any unsigned updates from reaching your system.


    <span id="[3.1]">[3.1]</span> BUILD AND INSTALL GNUPG1
    ____________________________________________________________________________

    Welcome to the KISS package manager! These two commands are how individual
    packages are built and installed on a KISS system.

    $ kiss build   gnupg1
    $ kiss install gnupg1


    <span id="[3.2]">[3.2]</span> IMPORT MY (DYLAN ARAPS) KEY
    ____________________________________________________________________________

    If the GNU keyserver fails on your network, you can try an alternative
    mirror (pgp.mit.edu for example).

    # Import my public key.
    $ gpg --keyserver keys.gnupg.net --recv-key 46D62DD9F1DE636E

    # Trust my public key.
    $ echo trusted-key 0x46d62dd9f1de636e >>/root/.gnupg/gpg.conf


    <span id="[3.3]">[3.3]</span> ENABLE SIGNATURE VERIFICATION
    ____________________________________________________________________________

    Repository signature verification uses a feature built into git itself
    (merge.verifySignatures`)!  This can be disabled at any time using the
    inverse of the git command below.

    The same steps can also be followed with 3rd-party repositories if the
    owner signs their commits.

    $ cd /var/db/kiss/repo
    $ git config merge.verifySignatures true


<span id="[4]">[4]</span> REBUILD KISS
________________________________________________________________________________

This step is entirely optional and you can just use the supplied binaries from
the downloaded chroot. This step can also be done after the installation.


    <span id="[4.1]">[4.1]</span> MODIFY COMPILER OPTIONS (optional)
    ____________________________________________________________________________

    These options have been tested and work with every package in the
    repositories. If you'd like to play it safe, use -O2 or -Os instead of -O3.

    If your system has a low amount of memory, omit -pipe. This option speeds
    up compilation but may use more memory.

    If you intend to transfer packages between machines, omit -march=native.
    This option tells the compiler to use optimizations unique to your
    processor's architecture.

    The `-jX` option should match the number of CPU cores available. You can
    optionally omit this, however builds will then be limited to a single core.

    # NOTE: The 'O' in '-O3' is the letter O and NOT 0 (ZERO).
    $ export CFLAGS="-O3 -pipe -march=native"
    $ export CXXFLAGS="-O3 -pipe -march=native"

    # NOTE: 4 should be changed to match the number of cores.
    $ export MAKEFLAGS="-j4"


    <span id="[4.2]">[4.2]</span> UPDATE ALL BASE PACKAGES TO THE LATEST VERSION
    ____________________________________________________________________________

    This is how updates are performed on a KISS system. This command uses git
    to pull down changes from all enabled repositories and will then optionally
    handle the build/install process.

    $ kiss update


    <span id="[4.3]">[4.3]</span> REBUILD ALL PACKAGES
    ____________________________________________________________________________

    We simply cd to the installed packages database and use a glob to grab the
    name of every installed package. This glob is then passed to the package
    manager as a list of packages to build.

    $ cd /var/db/kiss/installed && kiss build *


<span id="[5]">[5]</span> USERSPACE TOOLS
________________________________________________________________________________

Each kiss action (build, install, etc) has a shorthand alias. From now on,
'kiss b' and 'kiss i' will be used in place of 'kiss build' and 'kiss install'.

The software below is required unless stated otherwise.


    <span id="[5.1]">[5.1]</span> FILESYSTEMS
    ____________________________________________________________________________

    # Ext2, Ext3 and Ext4.
    $ kiss b e2fsprogs
    $ kiss i e2fsprogs

    # fat, vfat and friends (Only needed for UEFI).
    $ kiss b dosfstools
    $ kiss i dosfstools

    # xfs.
    $ kiss b xfsprogs
    $ kiss i xfsprogs

    # Open an issue for additional filesystem support.
    # Additional filesystems will go here.


    <span id="[5.2]">[5.2]</span> DEVICE MANAGEMENT
    ____________________________________________________________________________

    # Needed for blkid support in eudev.
    $ kiss b util-linux
    $ kiss i util-linux

    $ kiss b eudev
    $ kiss i eudev


    <span id="[5.3]">[5.3]</span> WIFI (optional)
    ____________________________________________________________________________

    $ kiss b wpa_supplicant
    $ kiss i wpa_supplicant


    <span id="[5.4]">[5.4]</span> DYNAMIC IP ADDRESSING (optional)
    ____________________________________________________________________________

    $ kiss b dhcpcd
    $ kiss i dhcpcd


<span id="[6]">[6]</span> THE KERNEL
________________________________________________________________________________

This step involves configuring and building your own Linux kernel. If you have
not done this before, below are a few guides to get you started.

- <a href='https://wiki.gentoo.org/wiki/Kernel/Gentoo_Kernel_Configuration_Guide'>https://wiki.gentoo.org/wiki/Kernel/Gentoo_Kernel_Configuration_Guide</a>
- <a href='https://wiki.gentoo.org/wiki/Kernel/Configuration'>https://wiki.gentoo.org/wiki/Kernel/Configuration</a>
- <a href='https://kernelnewbies.org/KernelBuild'>https://kernelnewbies.org/KernelBuild</a>

The Linux kernel is not managed by the package manager. The kernel is managed
manually by the user.

KISS does not support booting using an initramfs. When configuring your kernel
ensure that all required file-system, disk controller and USB drivers are built
with [*] (Yes) and not [m] (Module).

A patch may be required for some kernels when built with GCC 10.1.0. Please
read the link (and the patch itself for more information). <a href="/news/20200509a">news/20200509a</a>  


    <span id="[6.1]">[6.1]</span> INSTALL REQUIRED PACKAGES
    ____________________________________________________________________________

    libelf is required in most if not all cases.

    $ kiss b libelf
    $ kiss i libelf

    ncurses is needed for 'make menuconfig' and can be skipped if you will not
    be using it.

    $ kiss b ncurses
    $ kiss i ncurses

    Perl is needed by the build_OID_registry script which will be executed
    during your kernel build 99.9% of the time. What this means is that perl
    is *required*.

    $ kiss b perl
    $ kiss i perl

    Perl _can_ be avoided by applying the following patch to the kernel
    sources. The patch replaces the perl script with an implementation in POSIX
    shell (Thanks <a href="https://github.com/E5ten">E5ten</a>)  .

    Apply: <a href="/dist/kernel-no-perl.patch">dist/kernel-no-perl.patch</a>  


    <span id="[6.2]">[6.2]</span> DOWNLOAD THE KERNEL SOURCES
    ____________________________________________________________________________

    Kernel releases:

    - <a href='https://kernel.org'>https://kernel.org</a>    (vanilla)
    - <a href='https://www.fsfla.org'>https://www.fsfla.org</a> (libre)


    A larger list of kernels can be found here:

    - <a href='https://wiki.archlinux.org/index.php/Kernel'>https://wiki.archlinux.org/index.php/Kernel</a>


    Substitute KERNEL_SOURCE with the URL to the kernel sources.

    $ wget KERNEL_SOURCE

    # Extract the kernel sources.
    $ tar xvf KERNEL_SOURCE.tar.??
    $ cd linux-*


    <span id="[6.3]">[6.3]</span> DOWNLOAD FIRMWARE BLOBS (if required)
    ____________________________________________________________________________

    To keep the KISS repositories entirely FOSS, the proprietary kernel
    firmware is omitted. This also makes sense as the kernel itself is manually
    managed by the user.

    Note: This step is only required if your hardware utilizes these drivers.

    <a href='https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git'>https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git</a>

    # Download and extract the firmware.
    $ wget FIRMWARE_SOURCE.tar.gz
    $ tar xvf linux-firmware-20191022.tar.gz

    # Copy the required drivers to '/usr/lib/firmware'.
    $ mkdir -p /usr/lib/firmware
    $ cp -R ./path/to/driver /usr/lib/firmware


    <span id="[6.4]">[6.4]</span> CONFIGURE THE KERNEL
    ____________________________________________________________________________

    You can determine which drivers you need by searching the web for your
    hardware and the Linux kernel.

    If you require firmware blobs, the drivers you enable must be enabled as
    [m] (modules). You can also optionally include the firmware in the kernel
    itself.

    # Generate a default config with *most* drivers
    # compiled as `[*]` (not modules).
    $ make defconfig

    # Open an interactive menu to edit the generated config, enabling anything
    # extra you may need.
    $ make menuconfig

    # Store the generated config for reuse later.
    $ cp .config /path/to/somewhere


    <span id="[6.5]">[6.5]</span> BUILD THE KERNEL
    ____________________________________________________________________________

    This may take a while to complete. The compilation time depends on your
    hardware and kernel configuration.

    # '-j $(nproc)' does a parallel build using all cores.
    $ make -j "$(nproc)"


    <span id="[6.6]">[6.6]</span> INSTALL THE KERNEL
    ____________________________________________________________________________

    Ignore the LILO error, it's harmless.

    # Install the built modules.
    # This installs directly to /lib (symlink to /usr/lib).
    $ make modules_install

    # Install the built kernel.
    # This installs directly to /boot.
    $ make install

    # Rename the kernel.
    # Substitute VERSION for the kernel version you have built.
    # Example: 'vmlinuz-5.4'
    $ mv /boot/vmlinuz /boot/vmlinuz-VERSION
    $ mv /boot/System.map /boot/System.map-VERSION


<span id="[7]">[7]</span> THE BOOTLOADER
________________________________________________________________________________

The default bootloader is grub (though nothing prevents you from using whatever
bootloader you desire). This bootloader was chosen as most people are familiar
with it, both BIOS and UEFI are supported and vast amounts of documentation for
it exists


    <span id="[7.1]">[7.1]</span> RECOMMENDED
    ____________________________________________________________________________

    Have an /etc/fstab file ready.


    <span id="[7.2]">[7.2]</span> BUILD AND INSTALL GRUB
    ____________________________________________________________________________

    $ kiss b grub
    $ kiss i grub

    # Required for UEFI.
    $ kiss b efibootmgr
    $ kiss i efibootmgr


    <span id="[7.3]">[7.3]</span> SETUP GRUB
    ____________________________________________________________________________

    # BIOS.
    $ grub-install /dev/sdX
    $ grub-mkconfig -o /boot/grub/grub.cfg

    # UEFI (replace 'esp' with the EFI mount point).
    $ grub-install --target=x86_64-efi --efi-directory=esp --bootloader-id=kiss
    $ grub-mkconfig -o /boot/grub/grub.cfg


<span id="[8]">[8]</span> INSTALL INIT SCRIPTS
________________________________________________________________________________

The default init is busybox init (though nothing ties you to it). The below
commands install the bootup and shutdown scripts as well as the default
inittab config.

Source code: <a href="https://github.com/kisslinux/kiss-init">kisslinux/kiss-init</a>  

$ kiss b baseinit
$ kiss i baseinit


<span id="[9]">[9]</span> ADD A NORMAL USER (recommended)
________________________________________________________________________________

$ adduser USERNAME


<span id="[10]">[10]</span> ENABLE THE COMMUNITY REPOSITORY
________________________________________________________________________________

The KISS community repository is maintained by users of the distribution and
contains packages which aren't in the main repositories. This repository is
disabled by default.

# Clone the repository to a location of your choosing.
$ git clone <a href='https://github.com/kisslinux/community.git'>https://github.com/kisslinux/community.git</a>

# Add the repository to the system-wide 'KISS_PATH'. The 'KISS_PATH' variable
# works exactly like 'PATH'. Each repository is split by ':' and is checked in
# the order they're written.
#
# Add the full path to the repository you cloned above to the existing
# KISS_PATH. NOTE: The subdirectory must also be added.
$ vi /etc/profile.d/kiss_path.sh

# Spawn a new login shell to access this repository immediately.
$ sh -l


<span id="[11]">[11]</span> INSTALL XORG (optional)
________________________________________________________________________________

To install Xorg, the input drivers and a basic default set of fonts, run the
following commands

$ kiss b xorg-server xinit xf86-input-libinput

# Installing a base font is recommended as nothing will work without fonts..
$ kiss b liberation-fonts
$ kiss i liberation-fonts


    <span id="[11.1]">[11.1]</span> ADD YOUR USER TO THE RELEVANT GROUPS
    ____________________________________________________________________________

    This groups based permissions model may not be suitable if KISS will be
    used as a multi-seat system. Further configuration can be done at your
    own discretion.

    # Replace 'USERNAME' with the name of the user created above.
    $ addgroup USERNAME video
    $ addgroup USERNAME audio


<span id="[12]">[12]</span> FURTHER STEPS
________________________________________________________________________________

You should now be able to reboot into your KISS installation. Typical
configuration should follow (hostname, creation of users, service configuration,
installing a window manager, terminal etc).

If you encountered any issues, don't hesitate to open an issue on one of our
GitHub repositories, post on <a href='https://reddit.com/r/kisslinux'>https://reddit.com/r/kisslinux</a> or join the
IRC server.

See: <a href="/contact">contact</a>  

________________________________________________________________________________

Dylan Araps (C) 2019-2020

Linux(R) is the registered trademark of Linus Torvalds in the U.S. and
other countries.
</pre></div>
