<!doctype html><html lang=en><link href='data:image/gif;base64,R0lGODlhEAAQAPH/AAAAAP8AAP8AN////yH5BAUAAAQALAAAAAAQABAAAAM2SLrc/jA+QBUFM2iqA2bAMHSktwCCWJIYEIyvKLOuJt+wV69ry5cfwu7WCVp2RSPoUpE4n4sEADs=' rel=icon><title>KISS</title><meta charset=utf-8><meta name=Description content="An independent LinuxÂ® distribution with a focus on simplicity and the concept of less is more."><meta name=viewport content="width=device-width,initial-scale=1"><style>body{margin:0 0 4ch;overflow-y:scroll;font:16px monospace,monospace}img{max-width:80ch;display:block;height:auto;width:100%}@media(prefers-color-scheme:dark){body{background:#000;color:#fff}a{color:#6CF}}.l{text-decoration:none;color:red}#w{max-width:107ch;margin:0 auto}#s{min-width:25ch;position:fixed;top:2ch;margin:0;overflow-y:auto}#m{margin: 2ch 0 0 28ch;}@media(max-width:calc(107ch + 25ch)){body{font-size:1.99vw}#s{position:static}#s,#m{margin-left:1ch}}</style><div id=w><pre id=s>
+-----------------------+
| <a href=/ class=l> _    _               </a>|
| <a href=/ class=l>| | _(_)___ ___       </a>|
| <a href=/ class=l>| |/ / / __/ __|      </a>|
| <a href=/ class=l>|   &lt;| \__ \__ \      </a>|
| <a href=/ class=l>|_|\_\_|___/___/</a>      |
|                       |
| <a href=/news>News</a>                  |
| <a href=/blog>Blog</a>                  |
| <a href=/install>Install KISS</a>          |
| <a href=/faq>FAQ</a>                   |
|                       |
| <a href=/package-system>Package System</a>        |
| <a href=/package-manager>Package Manager</a>       |
|                       |
| <a href=/guidestones>Guidestones</a>           |
| <a href=/style>Style</a>                 |
|                       |
| <a href=/projects>Software</a>              |
|                       |
| <a href=/testimonials>Testimonials</a>          |
| <a href=/scrots>Screenshots</a>           |
| <a href=/team>Team</a>                  |
|                       |
| <a href=/contact>Contact</a>               |
| <a href=/donate>Donate</a>                |
|                       |
| <a href=https://github.com/kisslinux/>GitHub -&gt;</a>             |
|                       |
|                       |
| (C) Dylan Araps 2020  |
|                       |
+-----------------------+
</pre>

<pre id=m>
KISS PACKAGE SYSTEM
________________________________________________________________________________

The distribution employs a package system based around the concept of easily
parseable plain-text files (with fields separated by lines and spaces).

This format allows effortless interface using any programming language or just
basic UNIX utilities and tools.


DIRECTORY STRUCTURE
________________________________________________________________________________

zlib/             # Package name.
|- build          # Build script (chmod +x).
|- sources        # Remote and local sources.
|- version        # Package version.

# Optional files.

|- depends        # Dependencies (usually required).
|- pre-remove     # Pre-remove script (chmod +x).
|- post-install   # Post-install script (chmod +x).
|- patches/*      # Directory to store patches.
|- files/*        # Directory to store misc files.


BUILD
________________________________________________________________________________

The build file should contain all of the steps necessary to patch, configure,
make and install ('make install' in this context) the package. The file is
language agnostic and the only requirement is that it be executable.

On execution the script will start in the directory of the package's source
(no need to cd anywhere).

The script is also given arguments (equivalent to 'script arg arg'). The first
argument contains the path where the script should install the compiled files.
The second argument contains the package's version.

Everything in the mentioned path is added to the package tarball and later
installed to the system.

Example:

    #!/bin/sh -e

    # Disable stripping (add this only if needed).
    :> nostrip

    ./configure \
         --prefix=/usr

    make
    make DESTDIR="$1" install


DEPENDS
________________________________________________________________________________

The depends file should contain any other packages the package depends on to
function correctly. Each dependency should be listed one per line.

A second and optional field allows for the distinction between a compile time
dependency and a run time one. The value of this field should be set to 'make'
for compile time dependencies and left blank for runtime dependencies.

The depends file can be omitted entirely if the package has no dependencies.

Example:

    # Comments are also supported.

    # Perl is needed at compile time.
    perl make

    # zlib is needed at runtime.
    zlib


SOURCES
________________________________________________________________________________

The sources file should contain all remote and local files needed by the
package during the build. This includes the source, patches and any other
miscellaneous files which may be needed.

Each source should be listed one per line. An optional second field specifies
an extraction directory (relative to the build directory).

Sources which pull from a git repository use a special syntax. An additional
prefix 'git+' should be added with an optional suffix #hash or @branch).

Adding a suffix of '?no-extract' to the source URL will prevent the package
manager from automatically extracting the source (if a tarball or zip).

Example:

    <a href='https://example.com/dhcpcd-8.0.2.tar.xz'>https://example.com/dhcpcd-8.0.2.tar.xz</a>
    files/dhcpcd.run


Example (with second field):

    <a href='https://example.com/gcc-9.1.0.tar.xz'>https://example.com/gcc-9.1.0.tar.xz</a>  gcc
    <a href='https://example.com/gmp-6.1.2.tar.xz'>https://example.com/gmp-6.1.2.tar.xz</a>  gcc/gmp
    <a href='https://example.com/mpfr-4.0.2.tar.xz'>https://example.com/mpfr-4.0.2.tar.xz</a> gcc/mpfr
    <a href='https://example.com/mpc-1.1.0.tar.gz'>https://example.com/mpc-1.1.0.tar.gz</a>  gcc/mpc


Example (Git):

    git+<a href='https://github.com/dylanaraps/eiwd'>https://github.com/dylanaraps/eiwd</a>

    # Grabbing a specific branch.
    git+<a href='https://github.com/dylanaraps/eiwd@branch'>https://github.com/dylanaraps/eiwd@branch</a>

    # Grabbing a specific commit.
    git+<a href='https://github.com/dylanaraps/eiwd#commit'>https://github.com/dylanaraps/eiwd#commit</a>


Example (Automatic extraction disabled):

    <a href='https://example.com/zlib-1.2.0.tar.xz?no-extract'>https://example.com/zlib-1.2.0.tar.xz?no-extract</a>


VERSION
________________________________________________________________________________

The version file should contain a single line with two fields. All other lines
will be ignored.

The first field should contain the software's upstream version and the second
field should contain the version number of the repository files themselves.

If the package is using a git source to pull down the latest commit, the
version should be simply set to 'git'.

Example:

    1.2.3 1


Example (Git):

    git 1


PRE-REMOVE
________________________________________________________________________________

The pre-remove file should contain anything that needs run prior to the
removal of the package. The file is language agnostic and the only requirement
is that it be executable.

Example:

    #!/bin/sh -e

    printf 'No one has used this yet!\n'
    printf 'I have no example!\n'


POST-INSTALL
________________________________________________________________________________

The post-install file should contain anything that needs to be run after a
package installation to properly setup the software. The file is language
agnostic and the only requirement is that it be executable.

Example:

    #!/bin/sh -e

    fc-cache -f


PATCHES/*
________________________________________________________________________________

The patches directory should contain any patches the software needs.

In the `sources` file patches are referred to by using a relative path
(patches/musl.patch). The package manager does not automatically apply patches.
This must be done in the build script of the package.

The build script has direct access to the patches in its current working
directory ('patch -p1 < example.patch' works directly).


Example (sources):

    <a href='https://example.com/rxvt-unicode-9.22.tar.bz2'>https://example.com/rxvt-unicode-9.22.tar.bz2</a>
    patches/gentables.patch
    patches/rxvt-unicode-kerning.patch


Example (build):

    #!/bin/sh -e

    patch -p1 < rxvt-unicode-kerning.patch
    patch -p1 < gentables.patch

    ./configure \
         --prefix=/usr

    make
    make DESTDIR="$1" install


FILES/*
________________________________________________________________________________

The files/ directory should contain any miscellaneous files the software needs.

In the sources file, files are referred to by using a relative path
(files/busybox.config).

The build script has direct access to the files in its current working
directory ('cat example_file' works directly).

Example (sources):

    <a href='https://example.com/kiss-1.0.0.tar.gz'>https://example.com/kiss-1.0.0.tar.gz</a>
    files/kiss_path.sh

Example (build):

    #!/bin/sh -e

    install -D kiss "$1/usr/bin/kiss"

    # Accessible directly in '$PWD'.
    install -D kiss_path.sh "$1/etc/kiss_path.sh"



</pre></div>
